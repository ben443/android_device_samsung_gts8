name: Build TWRP Recovery
'on':
  push:
    branches:
      - main
  workflow_dispatch: null
  
jobs:
  build:
    name: Build TWRP Recovery with Auto-Detection
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v4
- name: Set Swap Space
      uses: pierotofy/set-swap-space@master
      with:
        swap-size-gb: 16  
- name: Free Disk Space (Ubuntu)
  # You may pin to the exact commit or the version.
  # uses: jlumbroso/free-disk-space@54081f138730dfa15788a46383842cd2f914a1be
  uses: jlumbroso/free-disk-space@v1.3.1
  with:
    # Remove Android runtime
    android: true # optional, default is true
    # Remove .NET runtime
    dotnet: true # optional, default is true
    # Remove Haskell runtime
    haskell: true # optional, default is true
    # Remove large packages
    large-packages: true # optional, default is true
    # Remove Docker images
    docker-images: true # optional, default is true
    # Remove image tool cache
    tool-cache: false # optional, default is false
    # Remove swap storage
    swap-storage: true # optional, default is true
          
        
    - name: Build TWRP
      uses: mlm-games/TWRP-recovery-build-action@v1.1
      with:
        MANIFEST_BRANCH: twrp-12.1
        DEVICE_TREE: 'https://github.com/GrenJIkxd/android_device_samsung_gts8'
        DEVICE_TREE_BRANCH: main
        DEVICE_NAME: ''
        DEVICE_PATH: ''
        MAKEFILE_NAME: ''
        BUILD_TARGET: boot
    - name: Upload Recovery Image
      uses: actions/upload-artifact@v4
      with:
        name: TWRP-Recovery
        path: '${{ env.OUTPUT_DIR }}/*.img'
